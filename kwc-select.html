<link rel="import" href="../polymer/polymer.html"><dom-module id="kwc-select"><template><style>:host{position:relative}label{display:block;cursor:pointer}#btn-select{@apply(--kwc-select-button)}#select-box{position:absolute;left:0;@apply(--kwc-select-box)}#search{width:100%;@apply(--kwc-select-search)}</style><button id="btn-select">[[_btnLabel]]</button><div id="select-box" hidden="[[!_opened]]"><input type="search" id="search" value="{{_search::input}}" placeholder="[[searchPlaceholder]]"><template is="dom-repeat" items="[[_elements]]" filter="[[_getFilter(_search)]]"><label><input type="checkbox" value="[[item.value]]" checked="{{item.checked::change}}"> [[item.value]]</label></template></div></template><script>"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="kwc-select",this.properties={items:{type:Array,value:[],observer:"_itemsChanged"},multiple:{type:Boolean,value:!1},onEmptyPlaceholder:{type:String,value:"Select"},minManySelectedItem:{type:Number,value:4},manySelectedItemsPlaceholder:{type:String,value:"{n} selected items"},searchPlaceholder:{type:String,value:""},value:{type:String,value:null,reflectToAttribute:!0,notify:!0},values:{type:Array,value:null,reflectToAttribute:!0,notify:!0},_search:{type:String,value:""},_elements:{type:Array,value:[]},_opened:{type:Boolean,value:!1},_btnLabel:{type:String,computed:"_computeBtnLabel(onEmptyPlaceholder, minManySelectedItem, manySelectedItemsPlaceholder, multiple, value, values)"}},this.listeners={"btn-select.tap":"_btnSelectTap"}}},{key:"attached",value:function(){this.values=this.multiple?[]:null;var e=this;this.addEventListener("change",function(t){return e._selectionChanged(t.target.value,t.target.checked)},!0)}},{key:"_itemsChanged",value:function(e){var t=this._elements?this._elements.filter(function(e){return e.checked}).map(function(e){return e.value}):[];this._elements=e.map(function(e){return{value:e,checked:t.indexOf(e)>=0}})}},{key:"_getFilter",value:function(e){if(!e)return null;var t=function(){var t=e.toLowerCase();return{v:function(e){return e.value&&e.value.toLowerCase().indexOf(t)>=0}}}();return"object"===("undefined"==typeof t?"undefined":_typeof(t))?t.v:void 0}},{key:"_selectionChanged",value:function(e,t){if(this.multiple)if(t){var n=[].concat(this.values||[]);n.push(e),this.values=n}else this.values=this.values.filter(function(t){return t!==e});else t?(Array.from(this.querySelectorAll("input[type=checkbox]")).forEach(function(t){return t.checked=t.value===e}),this.value=e):this.value=null}},{key:"_btnSelectTap",value:function(){this._opened=!this._opened}},{key:"_computeBtnLabel",value:function(e,t,n,l,r,a){return l?a&&a.length?a.length>t?n.replace(/\{n}/gi,a.length):a.join(", "):e:null!==r?r:e}}]),e}();Polymer(e)}();</script></dom-module>